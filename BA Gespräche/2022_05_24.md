# Todos

## Arbeit
### Gliederung ausschreiben
### wichtige Passen schonmal rausschreiben
### verbesserungen an bestehendem Text implementieren

## Binäres Protokoll entwickeln

## C-Library schreiben

## Test mit und ohne QOS2 mit IOT WLAN

## Timeout in Queue


# Aufgekommene Fragen

## JSON unter C?
Protokoll muss einmalig zwischen allen Programmiersprachen standardisiert werden.
Zuerst war die Idee Nachrichten in zwei Systeme aufzuteilen:

1. Binärprotokoll
2. JSON-Basiertes Protokoll

Das Problem ist, dass das Binärprotokoll zwischen Library und Mittelware zum Einsatz kommt.
Dafür sollten pro Typ, Argument und Command ein ENUM zum Einsatz kommen der die Entitäten durchnumeriert.
Die Nummern sollten am Ende entweder als Char oder zusammengesetzt als int übertragen werden.
In der Middleware hätten Sie dann wieder aufgeschlüsselt und in JSON umgewandelt werden müssen.
![BinaryProtocol](images/binary_protocol.png)


Die Library soll aber Programmiersprachenunabhänig sein.
Das bedeutet, dass die Enums in jeder Sprache in exakt der gleichen Reihenfolge definiert sein müssen damit es nicht zu fehlern kommt.

Gerade bei Commands kommen jedoch ständig neue hinzu. Diese müssten auf allen anderen Implementierungen auch aktuell gehalten werden.

### Lösung

Die Lösung hierfür ist doch alles per JSON zu machen.
Es wurde sich ursprünglich nur gegen JSON in der Library entschieden, da für C dann extra ein Parser geschrieben werden musste.
JSON ist bei Java und Python nämlich bereits dabei.

Nun soll auf die Lib [cJSON](https://github.com/DaveGamble/cJSON) zurückgegriffen werden.
![Templates](images/all_json.png) Die JSON-Templates sollen dann aus einer Datei ausgelesen werden.
Diese gilt sowohl für die Libraries (C, Python, Java) und Android.
